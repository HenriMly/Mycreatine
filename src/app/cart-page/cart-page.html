<section class="cart" aria-labelledby="cart-heading">
	<h1 id="cart-heading" class="heading">Panier</h1>

	@if (items().length === 0) {
		<p role="status">vide</p>
	} @else {
		<div class="cart-list" role="list">
			@for (item of items(); track item.id) {
				<div class="cart-item" role="listitem">
					<a class="media" [routerLink]="['/product', item.id]" aria-label="Voir {{ item.title }}">
						<img [ngSrc]="item.imageUrl || '/image/NO-Image.jpg'" width="160" height="160" alt="{{ item.title }}" />
					</a>
					<div class="info">
						<h2 class="title"><a [routerLink]="['/product', item.id]">{{ item.title }}</a></h2>
						<p class="price">Prix: {{ item.price | currency:'EUR' }}</p>
						<label class="qty-label" for="qty-{{ item.id }}">Quantité</label>
						<input id="qty-{{ item.id }}" type="number" min="0" [value]="item.quantity"
									 (change)="updateQty(item.id, $any($event.target).value)"
									 (blur)="updateQty(item.id, $any($event.target).value)"
									 aria-describedby="qty-help-{{ item.id }}" />
						<div class="item-actions">
							<button matButton aria-label="Retirer {{ item.title }}" (click)="remove(item.id)">Retirer</button>
						</div>
					</div>
				</div>
			}
		</div>

		<div class="summary" role="region" aria-label="Résumé du panier">
			<p class="count">Articles: {{ count() }}</p>
			<p class="total">Total: {{ total() | currency:'EUR' }}</p>
			<div class="actions">
				<button matButton aria-label="Vider le panier" (click)="clear()">claer</button>
				<a matButton aria-label="Passer à l'étape suivante" [routerLink]="['/information']">Suivant</a>
			</div>
		</div>
	}
</section>
