<section class="detail">
	@if (product(); as p) {
		<div class="media">
			<img [ngSrc]="p.imageUrl || fallbackImage"
					 width="800" height="800"
					 (error)="onImgError($event)"
					 alt="{{ p.title }}" />
		</div>
		<div class="info">
			<h1 class="title">{{ p.title }}</h1>
			<p class="desc">{{ p.description }}</p>
			<p class="price">{{ p.price | currency:'EUR' }}</p>
			<p class="stock" [attr.aria-live]="'polite'">Stock: {{ p.stock }}</p>
			<div class="actions">
				<button matButton [disabled]="p.stock === 0" aria-label="Ajouter {{ p.title }} au panier">
					Ajouter au panier
				</button>
				<a routerLink="/products" mat-button aria-label="Retour produits">Retour</a>
			</div>
		</div>
	} @else {
		<p>Produit introuvable.</p>
		<a routerLink="/products" mat-button>Retour aux produits</a>
	}
</section>
